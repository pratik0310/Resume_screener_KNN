<!doctype html>
<html>
  <head>
    <title>Screening Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body class="bg-light">
    <div class="container py-5">
      <a href="{{ url_for('index') }}" class="btn btn-link">&larr; Back</a>
      <h1>Screening Result</h1>

      <div class="row mt-4">
        <div class="col-md-6">
          <h5>Score</h5>
          <div class="card p-3">
            <h2>{{ result.match_percent }}%</h2>
            <p>Skills: {{ result.skill_score }}% · Experience: {{ result.experience_score }}% · Education: {{ result.education_score }}%</p>
          </div>

          <h5 class="mt-3">Matched Skills</h5>
          <ul>
            {% for s in result.matched_skills %}
              <li>{{ s }}</li>
            {% endfor %}
            {% if result.matched_skills|length == 0 %}
              <li><em>None</em></li>
            {% endif %}
          </ul>

          <h5 class="mt-3">Missing Skills (from JD)</h5>
          <ul>
            {% for s in result.missing_skills %}
              <li>{{ s }}</li>
            {% endfor %}
            {% if result.missing_skills|length == 0 %}
              <li><em>None</em></li>
            {% endif %}
          </ul>
        </div>

        <div class="col-md-6">
          <h5>Extracted Info</h5>
          <div class="card p-3 mb-3">
            <p><strong>Email:</strong> {{ resume_data.contact.email or 'Not found' }}</p>
            <p><strong>Phone:</strong> {{ resume_data.contact.phone or 'Not found' }}</p>
            <p><strong>Experience (years):</strong> {{ resume_data.experience_years }}</p>
            <p><strong>Education:</strong> {{ resume_data.education | join(', ') }}</p>
            <p><strong>Skills (detected):</strong> {{ resume_data.skills | join(', ') }}</p>
          </div>

          <h5>Resume snippet</h5>
          <pre style="max-height:300px; overflow:auto;">{{ resume_data.text_snippet }}</pre>
        </div>
      </div>
    </div>
  </body>
</html>
